{
  "type": "step_based",
  "name": "Score Data",
  "active": false,
  "runAsUser": "thinhprovc202@gmail.com",
  "checklists": {
    "checklists": []
  },
  "delayedTriggersBehavior": {
    "delayWhileRunning": true,
    "squashDelayedTriggers": true,
    "suppressTriggersWhileRunning": true
  },
  "tags": [],
  "triggers": [
    {
      "id": "LjOVe8sa",
      "type": "temporal",
      "name": "Weekly",
      "delay": 5,
      "active": true,
      "params": {
        "repeatFrequency": 1,
        "frequency": "Weekly",
        "startingFrom": "2023-07-01",
        "daysOfWeek": [
          "Sunday"
        ],
        "minute": 0,
        "hour": 2,
        "timezone": "SERVER",
        "lastUpdate": 1728458140740
      }
    }
  ],
  "reporters": [],
  "params": {
    "steps": [
      {
        "id": "build_0_true_d_job_postings_prepared_joined",
        "type": "build_flowitem",
        "name": "Build downstream",
        "runConditionType": "RUN_IF_STATUS_MATCH",
        "runConditionStatuses": [
          "SUCCESS",
          "WARNING"
        ],
        "runConditionExpression": "",
        "resetScenarioStatus": false,
        "delayBetweenRetries": 10,
        "maxRetriesOnFail": 0,
        "params": {
          "builds": [
            {
              "type": "DATASET",
              "itemId": "job_postings_prepared_joined",
              "partitionsSpec": ""
            }
          ],
          "jobType": "RECURSIVE_FORCED_BUILD",
          "autoUpdateSchemaBeforeEachRecipeRun": false,
          "stopAtFlowZoneBoundary": false,
          "refreshHiveMetastore": true,
          "handleWarningsAs": "WARNING",
          "proceedOnFailure": false
        }
      },
      {
        "id": "custom_python_P6WAl33FM32yGw0pZdte8A",
        "type": "custom_python",
        "name": "Step #2",
        "runConditionType": "RUN_IF_STATUS_MATCH",
        "runConditionStatuses": [
          "SUCCESS",
          "WARNING"
        ],
        "runConditionExpression": "",
        "resetScenarioStatus": false,
        "delayBetweenRetries": 10,
        "maxRetriesOnFail": 1,
        "params": {
          "script": "from dataiku.scenario import Scenario, BuildFlowItemsStepDefHelper\nimport dataiku\n\n# Lấy danh sách tất cả các project\nclient \u003d dataiku.api_client()\nproject_keys \u003d client.list_projects()\n# Lấy key của từng project\nz \u003d [project[\u0027projectKey\u0027] for project in project_keys]\n# Handling our scenario.\ns \u003d Scenario()\n# Khởi tạo bước xây dựng\nfor i in range(5):\n    step \u003d BuildFlowItemsStepDefHelper(\"Machine Learning\")\n    step.add_dataset(\"job_postings\", \"QS_MLOPS_2\")\n    step.add_dataset(\"job_postings_prepared\", \"QS_MLOPS_2\")\n    step.add_dataset(\"job_postings_prepared_joined\", \"QS_MLOPS_2\")\n    step.add_dataset(\"train\", \"QS_MLOPS_2\")\n    step.add_dataset(\"test\", \"QS_MLOPS_2\")\n    # Chạy bước này\n    try:\n        s.run_step(step.get_step())\n    except Exception as e:\n        print(f\"Step {i+1} gặp lỗi: {str(e)}\")",
          "envSelection": {
            "envMode": "EXPLICIT_ENV",
            "envName": "time_series"
          },
          "proceedOnFailure": true
        }
      }
    ]
  },
  "automationLocal": false,
  "customFields": {},
  "markedAsTest": false
}